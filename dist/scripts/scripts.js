"use strict";angular.module("vendingMachineApp",["ngResource","ngRoute","ngSanitize"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).otherwise({redirectTo:"/"})}]),angular.module("vendingMachineApp").controller("MainCtrl",["$scope","$timeout","$filter","vendingMachineUI",function(a,b,c,d){function e(b){return b<a.productPrices.length?!0:(n("Please select a correct product"),!1)}function f(b){return a.productPrices[b]}function g(b){return a.credit>=b?!0:(m(b),!1)}function h(a){return d.getProductByKey(a)?!0:(n("No Product available"),!1)}function i(b){return b>a.credit?!1:d.getChangeCoin(b)?(k(b),!0):!1}function j(b){a.credit+=b,l()}function k(b){a.credit-=b,l()}function l(){a.credit=Math.round(100*a.credit)/100}function m(a){n(c("currency")(a,"$"))}function n(c){a.status=c,b(function(){a.status=""},1e3)}a.credit=0,a.status="",a.keyboardButtonsNum=_.range(0,9),a.productPrices=d.getProductPrice(),a.userHasChange=!1,a.showCoinChange=!1,a.productSelect=0,a.coinDenominations=[.01,.05,.1,.25,.5,1],a.allProducts=[{type:"snack",price:"1¢"},{type:"snack",price:"3¢"},{type:"chocolate",price:"10¢"},{type:"snack",price:"2¢"},{type:"snack",price:"50¢"},{type:"drink",price:"25¢"},{type:"drink",price:"$1.50"},{type:"drink",price:"$5"}],a.coinSelected=function(a){j(a)},a.selectProductByKey=function(c){if(e(c)){var d=f(c);return g(d)?void(h(c)&&(a.productSelected=c,b(function(){a.productSelected=-1},3e3),k(d),n("Take your product"))):void n("You don't have enough money")}},a.dispenseChange=function(){a.coinDenominations.forEach(function(a){for(;i(a););}),a.showCoinChange=!0},a.$watch("credit",function(b,c){a.userHasChange=b>0?!0:!1})}]),angular.module("vendingMachineApp").factory("vendingMachineUI",function(){var a,b={};return b.getProductPrice=function(){return a=[.01,.03,.1,.02,.5,.25,1.5,5]},b.getProductByKey=function(a){return 1!==a},b.getChangeCoin=function(a){return!0},b}),angular.module("vendingMachineApp").run(["$templateCache",function(a){a.put("views/main.html",'<div class="vending-machine"> <div class="col-1-2"> <div class="products-container"> <!--Product--> <div ng-repeat="product in allProducts" class="product-item" ng-class="{\'product-dispatch\' : $index == productSelected}"> <div class="product-item__type"></div> <div class="product-item__price">{{product.price}}</div> <div class="product-item__position-indicator">{{$index + 1}}</div> </div> <!--/Product--> </div> <div class="product-dispenser"></div> </div> <div class="col-1-2"> <div class="screen"> <input type="text" value="{{credit}}" readonly> </div> <div class="coins-container"> <h3>Insert Coin <span>(by Click)</span></h3> <div class="col-1-8"> <div class="coin--slot"></div> </div> <div class="col-7-8"> <div class="coins"> <button ng-click="coinSelected(0.01)" class="coin--value-1">1¢</button> <button ng-click="coinSelected(0.05)" class="coin--value-5">5¢</button> <button ng-click="coinSelected(0.1)" class="coin--value-10">10¢</button> <button ng-click="coinSelected(0.25)" class="coin--value-25">25¢</button> <button ng-click="coinSelected(0.50)" class="coin--value-50">50¢</button> <button ng-click="coinSelected(1.0)" class="coin--value-100">1$</button> </div> </div> </div> <div class="keyboard-container"> <h3>Select Product</h3> <div class="screen-indicator"> <input type="text" value="{{status}}" placeholder="Are you hungry?" readonly> </div> <div class="col-1-2"> <div class="keyboard"> <button ng-repeat="btn in keyboardButtonsNum" ng-click="selectProductByKey($index)">{{$index + 1}}</button> </div> </div> <div class="col-1-2"> <div ng-class="{\'has-change\': showCoinChange}" class="change-slot"> <button ng-click="showCoinChange = false" class="change--coin"></button> <button ng-show="userHasChange" ng-click="dispenseChange()" class="btn_take-change">Take Change</button> </div> </div> </div> </div> </div>')}]);